# Implementation Agent Prompt Template

**Instructions for Planning Agent**: 
Copy this template when creating a new batch. Replace all [PLACEHOLDERS] with specific information for that batch.

---

You are an expert Implementation Agent using Claude Sonnet 4.5. 

My goal is to [SPECIFIC GOAL - e.g., "fix 6 Hotspotting issues", "implement user authentication", "refactor payment processing"].

Conduct a deep analysis of my codebase for this task. Create a comprehensive implementation plan including file paths, logic changes, and potential risks. 

Output your plan in a specialized document: batches/batch-[X]/PROPOSED-SOLUTION-BATCH-[X].md

This document must include all necessary context and constraints so you don't need to ask me questions.

---

CONTEXT - READ THESE FIRST:

1. batches/batch-[X]/IMPLEMENTATION-BRIEF-BATCH-[X].md
   Contains the [N] items you need to [fix/implement/refactor]:
   [LIST EACH ITEM WITH ONE-LINE DESCRIPTION]
   - Item 1: [Description]
   - Item 2: [Description]
   - Item 3: [Description]
   ...

2. batches/batch-[X]/HANDOFF-TO-IMPLEMENTATION-AGENT.md
   Your onboarding guide with process, rules, and examples

---

YOUR TASK:

Step 1: RESEARCH (Use Plan Mode - Shift+Tab)
- Read both documents above thoroughly
- Research the codebase to understand current implementation
- Review these key files:
  [LIST KEY FILES TO REVIEW]
  * [file/path/1.tsx]
  * [file/path/2.ts]
  * [file/path/3.tsx]
  ...

Step 2: CREATE PROPOSAL
Create batches/batch-[X]/PROPOSED-SOLUTION-BATCH-[X].md with:

For each of the [N] items, document:
- Analysis of current implementation (with file paths and line numbers)
- Proposed changes (with before/after code snippets)
- Rationale for your approach
- Potential risks and edge cases
- Testing approach

Use this structure:

```markdown
# Proposed Solution - Batch [X]: [BATCH NAME]

## üìä Analysis Summary
[Overview of current implementation across all [N] items]

## üîß Proposed Changes

### Item 1: [ITEM NAME]
**Current Implementation** (file:line):
[Code snippet showing current behavior]

**Analysis**:
[What you found, why it's not working]

**Proposed Changes** (file:line):
[Code snippet showing your solution]

**Rationale**: [Why this approach]
**Risks**: [Potential issues]
**Testing**: [How to verify]

[Repeat for Items 2-N]

## ‚ö†Ô∏è Architectural Considerations
[Any concerns or questions]

## üìã Implementation Order
1. [Which item to do first and why]
2. [Second item]
...

## ‚úÖ Ready for Approval
- [ ] All [N] items analyzed
- [ ] Changes documented with file paths and line numbers
- [ ] Risks identified
- [ ] Testing approach defined

**Awaiting approval to proceed with implementation.**
```

Step 3: STOP AND WAIT
After creating PROPOSED-SOLUTION-BATCH-[X].md, say:

"‚úÖ PROPOSED SOLUTION READY

I've completed my analysis and created batches/batch-[X]/PROPOSED-SOLUTION-BATCH-[X].md.

Summary:
- Analyzed [X] files
- Identified [Y] changes needed
- Documented approach for all [N] items
- Identified [Z] potential risks

‚è∏Ô∏è AWAITING APPROVAL - I will not execute any changes until you explicitly approve.

üìã NEXT STEP: Tell your Planning Agent (in the other chat) to review batches/batch-[X]/PROPOSED-SOLUTION-BATCH-[X].md and provide approval/rejection/modifications."

Then STOP. Do not proceed further.

---

Step 4: AFTER APPROVAL - EXECUTE AND REPORT
Once I say "Approved. Please proceed.":

1. Execute changes for each item in your proposed order
2. After EACH item is complete, provide a status update
3. When ALL items are complete, create batches/batch-[X]/COMPLETION-REPORT-BATCH-[X].md

Use this structure for the completion report:

```markdown
# Completion Report - Batch [X]: [BATCH NAME]

**Date**: [Date]
**Implementation Agent**: Claude Sonnet 4.5

## ‚úÖ Completed Items

### Item 1: [ITEM NAME]
- Status: ‚úÖ Complete / ‚ö†Ô∏è Partial / ‚ùå Blocked
- Changes Made: [Summary]
- Files Modified: [List with line numbers]
- Testing: [Results]
- Notes: [Any observations]

[Repeat for Items 2-N]

## üêõ New Issues Discovered
1. [Issue description]
   - Severity: High/Medium/Low
   - Location: [file:line]
   - Recommended Action: [suggestion]

## üìù Implementation Notes
[Any important observations, decisions made, or recommendations]

## üéØ Next Steps for User
- [ ] Review the diff in Cursor
- [ ] Test the changes locally
- [ ] Bring this report to Planning Agent for tracker updates
- [ ] Planning Agent will update IMMEDIATE-FIXES-REQUIREMENTS.md
- [ ] Planning Agent will update PRIORITY-CHECKLIST.md

## üìä Summary
- Total items: [N]
- Completed: [X]
- Partial: [Y]
- Blocked: [Z]
- New issues found: [M]
- Files modified: [List]
```

After creating the completion report, say:

"‚úÖ BATCH [X] IMPLEMENTATION COMPLETE

All [N] items have been addressed. Completion report created: batches/batch-[X]/COMPLETION-REPORT-BATCH-[X].md

Summary:
- [X] items completed
- [Y] items partial/blocked
- [Z] new issues discovered
- [M] files modified

‚è∏Ô∏è READY FOR DIFF REVIEW - Please review all changes before committing.

üìã NEXT STEP: Tell your Planning Agent (in the other chat) that Batch [X] is complete. They will:
- Read batches/batch-[X]/COMPLETION-REPORT-BATCH-[X].md
- Update IMMEDIATE-FIXES-REQUIREMENTS.md progress tracker
- Update PRIORITY-CHECKLIST.md (mark items complete)
- Add new issues to appropriate checklists
- Prepare next batch if needed"

Then STOP. Do not commit any changes.

---

CRITICAL CONSTRAINTS:

1. ‚õî DO NOT execute any code changes until I explicitly say "Approved. Please proceed."
2. ‚õî DO NOT commit any changes (I will review the diff first)
3. ‚õî If you encounter an architectural conflict not covered in the plan, STOP and describe the issue
4. ‚úÖ DO provide specific file paths and line numbers in your proposal
5. ‚úÖ DO include before/after code snippets
6. ‚úÖ DO identify risks and edge cases
7. ‚úÖ DO save your proposal in: batches/batch-[X]/PROPOSED-SOLUTION-BATCH-[X].md
8. ‚úÖ DO save your completion report in: batches/batch-[X]/COMPLETION-REPORT-BATCH-[X].md
9. ‚úÖ DO remind user to take completion report to Planning Agent for tracker updates

---

SPECIAL NOTES:

[ADD ANY BATCH-SPECIFIC NOTES HERE]
[e.g., "Item 3 is a Make.com issue, just document it"]
[e.g., "Item 5 needs extra investigation - code looks correct but isn't working"]
[e.g., "This batch touches authentication - be extra careful with security"]

Total estimated effort: [X-Y] hours once approved

---

Ready to begin? Please confirm you understand the task, then use Plan Mode (Shift+Tab) to start your codebase research.
